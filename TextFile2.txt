

public IList<FakturaListItemDTO> PobierzProduktList()
{
    var result = new List<FakturaListItemDTO>();

    try
    {
        using (var db = new DataEntities())
        {
            foreach (var item in db.produkt)
            {
                result.Add(new FakturaListItemDTO
                {
                    id_faktura_poz = item.id_faktura_poz,
                    nazwa = item.nazwa,
                    cena_netto = item.cena_netto,
                    wartosc_vat = item.wartosc_vat,
                    ilosc = item.ilosc,
                });
            }
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }

    return result;
}

        public IList<AddProduktListItemDTO> DodajProduktList(IList<AddProduktListItemDTO> lista)
        {
            var result = new List<AddProduktListItemDTO>();

            try
            {
                using (var db = new DataEntities())
                {
                    var Produkt = new Produkt
                    {
                        nazwa = lista[0].nazwa,
                        NIP = lista[0].NIP,
                        adres = lista[0].adres,
                        numer_konta = lista[0].numer_konta,
                        kod_pocztowy = lista[0].kod_pocztowy,
                        miasto = lista[0].miasto,
                        typ = lista[0].typ
                    };
                    db.Produkt.Add(Produkt);
                    db.SaveChanges();
                }
            
            }catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            return lista;
        }

        public IList<DropProduktListItemDTO> UsunProduktList(IList<DropProduktListItemDTO> lista)
        {
            var result = new List<DropProduktListItemDTO>();
            using (var db = new DataEntities())
            {
                var Produkt = db.Produkt.Where(x => x.id_faktura_poz == lista[0].id_faktura_poz).FirstOrDefault();
                if (Produkt != null)
                {
                    db.Produkt.Remove(Produkt);
                    db.SaveChanges();
                }
            }
        }

        public IList<UpdateProduktListItemDTO> DownloadForUpdateProduktList(int idProd)
        {
            var result = new List<UpdateProduktListItemDTO>();
            using (var db = new DataEntities())
            {
                var Produkt = db.Produkt.Where(x => x.id_faktura_poz == idProd).FirstOrDefault();
                if (Produkt != null)
                {
                    result.Add(new UpdateProduktListItemDTO
                    {
                        id_faktura_poz = Produkt.id_faktura_poz,
                        nazwa = Produkt.nazwa,
                        cena_brutto = Produkt.cena_brutto,
                        cena_netto = Produkt.cena_netto,
                        VAT = Produkt.VAT,
                        Jedn_miary = Produkt.Jedn_miary,
                        wartosc_vat = Produkt.wartosc_vat,
                        ilosc = Produkt.ilosc
                    });
                }
            }
        }
        public IList<UpdateProduktListItemDTO> UpdateProduktList(IList<UpdateProduktListItemDTO> lista)
        {
            var result = new List<UpdateProduktListItemDTO>();

            using (var db = new DataEntities())
            {
                var Produkt = db.Produkt.Where(x => x.id_faktura_poz == lista[0].id_faktura_poz).FirstOrDefault();
                if (Produkt != null)
                {
                    Produkt.nazwa = lista[0].nazwa;
                    Produkt.cena_brutto = lista[0].cena_brutto;
                    Produkt.cena_netto = lista[0].cena_netto;
                    Produkt.VAT = lista[0].numer_konta;
                    Produkt.Jedn_miary = lista[0].Jedn_miary;
                    Produkt.wartosc_vat = lista[0].wartosc_vat;
                    Produkt.ilosc = lista[0].ilosc;
                    db.SaveChanges();
                }
        }
            